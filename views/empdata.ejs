<html lang="en" id="html">
  <head>
      <title>Admin Panel</title>
      <meta charset="utf-8">
     <link rel="shortcut icon" href="images/mini-logo.png" type="image/x-icon">
      <meta name="viewport" content="width=device-width, initial-scale=1">
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
     <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
      <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
      <link rel="stylesheet" href="/css/bootstrap.css">
      <link rel="stylesheet" href="/css/index.css">
      <script src="/js/jquery.min.js"></script>
      <script src="/js/bootstrap.min.js"></script>
        <link href="https://fonts.googleapis.com/css?family=Poppins:400,500,600,700&display=swap" rel="stylesheet">
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    </head>
    <body>
        <% include header.ejs %>
    <% include side_bar.ejs %>
        <div class="main-content">
               <div class="container1">
              <div id="preloader">
      <div id="status">&nbsp;</div>
    </div>
                    <div id="my_div">
                    <h4>Employee Database</h4>
                  <div class="row">
                    <div class="col-xs-9">
          <input type="text" id="myInput" class="controls" onkeyup="myFunction()" placeholder=" Search for Employees.." style="width:60%;margin-bottom:10px;" >
        </div><div class="col-xs-3 hidden-xs"><br>Showing 281 Records</div> </div>
             <table >
                      <thead class="header">
                        <th style="width:5%;">Id</th>
                        <th style="width:15%;">Employee Name</th>
                        <th style="width:15%;">Number</th>
                           <th style="width:15%;">Email</th>
                        <th style="width:20%;">Resident Address</th>
                        <th style="width:15%;">Designation</th>
                        <th style="width:8%;">Status</th>
                        <th style="width:5%;">Action</th>
                      </thead>
                      <tbody id="myTable">
                        <% if(typeof result !== 'undefined') {result.forEach(function(row){ %>
                           <tr>
                          <td><%= row.empid %></td>
                          <td><%= row.name %></td>
                          <td><%= row.mail %></td>
                          <td><%= row.number %></td>
                          <td><%= row.address %></td>
                          <td><%= row.designation %></td>
                          <td><span style="color:#ffffff;background-color:green;font-weight:500;letter-spacing:0.5px;padding:5px;border-radius:4px;"><%= row.status %></span></td>
                          <td><button data-toggle="modal" data-target="#<%= row.empid %>" class="btn btn-default">Edit</button></td>
                        </tr>
                        <% });} %>
                          </tbody> </table>
        </div>       
            </div>
          

<!--right modal-content starts here-->
<% if(typeof result != 'undefined'){result.forEach(function(row){ %>
  <div class="modal right fade" id="<%= row.empid %>" tabindex="-1" role="dialog" aria-labelledby="myModalLabel2">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
  
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title title" id="myModalLabel2">Employee Information<span class="green"> (SV456)</span></h4>
          </div>
  
          <div class="modal-body">
               <img class="empimg" src="/emp_photo/<%= row.photo %>"  onerror="this.src='/images/team1.jpg';"> <br><br>
               
              <form action="/empdata" method="post" > 
               <input type="hidden" name="empid" class="text" value="<%= row.empid %>">
              <table class="table table-user-information">
                  <tbody>
                    
                    <tr>
                      <td class="first">Employee Name :</td>
                      <td class="first"><input type="text" name="name" class="text" value="<%= row.name %>"></td>
                      </tr>
                    <tr>
                      <td>Employee Contact :</td>
                      <td><input type="text" class="text" onkeypress="return isNumber(event)" name="number" value="<%= row.number %>"></td>
                    </tr>
    
                           <tr>
                      <td>Employee Email:</td>
                      <td><input type="text" class="text" name="mail" value="<%= row.mail %>"></td>
                    </tr>
                      <tr>
                      <td>Resident Address : </td>
                          <td><textarea name="address" class="text"><%= row.address %></textarea></td>
                    </tr>
                    <tr>
                      <td>Joined Date :</td>
                      <td><input type="datetime" id="datetimepicker" class="text" name="joindate" value="<%= row.joining_date %>"></td>
                    </tr>
                     <tr>
                      <td>CTC :</td>
                      <td><input type="text" onkeypress="return isNumber(event)" class="text" name="ctc" value="<%= row.ctc %>"></td>
                    </tr>
                    <tr>
                        <td>Designation :</td>
                        <td><input type="text" class="text" name="designation" value="<%= row.designation %>"></td>
                      </tr>
                      <!--<tr>-->
                      <!--    <td>Years in Experince :</td>-->
                      <!--    <td><input typ="text" class="text" value="1 year"></td>-->
                  
                      <!--  </tr>-->
                        <tr>
                            <td>Employee Status</td>
                    <td>
                        <select name="status" class="selectit" > 
                         <option value="Active">Active</option>  
                          <option value="Inactive">Inactive</option> 
                        </select>
                        </td> </tr>
                        <tr>
                            <td>Authorization Level</td>
                    <td>
                        <select name="auth" class="selectit" > 
                         <option value="1">Super Admin</option>  
                          <option value="2">Labor</option> 
                        </select>
                        </td> </tr>
                        <td>
                            
                              <button class="buttongreen" style="margin-top:10px;">UPDATE</button>
                        </td>
                  
</tbody></table>  
    </form>
              
        </div><!-- modal-content -->
      </div><!-- modal-dialog -->
      </div><!-- modal --></div>
   <% });} %>
      </div>
 
      <script>$('.btn-expand-collapse').click(function(e) {
          $('.navbar-primary').toggleClass('collapsed');
  });</script>
        <script>
          var dropdown = document.getElementsByClassName("dropdown-btn");
          var i;
          
          for (i = 0; i < dropdown.length; i++) {
            dropdown[i].addEventListener("click", function() {
              this.classList.toggle("active");
              var dropdownContent = this.nextElementSibling;
              if (dropdownContent.style.display === "block") {
                dropdownContent.style.display = "none";
              } else {
                dropdownContent.style.display = "block";
              }
            });
          }
          </script>
      
      <script>$(window).on('load', function() { // makes sure the whole site is loaded 
    $('#status').fadeOut(); // will first fade out the loading animation 
    $('#preloader').delay(350).fadeOut('slow'); // will fade out the white DIV that covers the website. 
    $('body').delay(350).css({'overflow':'visible'});
  })</script>
      
        <script>
                                $(document).ready(function(){
                                  $("#myInput").on("keyup", function() {
                                    var value = $(this).val().toLowerCase();
                                    $("#myTable tr").filter(function() {
                                      $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
                                    });
                                  });
                                });
                                </script>
  <script src="/customjs/onlynumbers.js"></script>
  <script src="/customjs/onlyalphabets.js"></script>
                                <!--<input class="controls" type="text" name="number"  onkeypress="return isNumber(event)"  placeholder="Enter Employee Contact Number">-->                           
                              
                              
    </body></html>